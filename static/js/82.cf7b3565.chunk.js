(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{1165:function(e,a,t){"use strict";t.r(a);var n=t(125),r=t(0),i=t.n(r),l=t(73),o=t(76),u=t(90),m=t(159),c=t(976),s=t(14),d=t.n(s),p=t(975),f=t.n(p),b=t(65),g=t.n(b),v=t(1039),y=t(987),E=t(988),h=t(95),O=t(984),S=t(12),j=t(1068),w=t(187),F=t(1019),V=t.n(F),k=(t(186),t(336)),_=t(981),q=t(334),A=v.a.TabPane;a.default=Object(m.a)(Object(u.c)("main"))(function(e){var a=e.t,t=e.match,u=e.location,m=e.history,s=Object(l.d)(function(e){return e.system}),p=Object(r.useState)(s.language),b=Object(n.a)(p,2),F=b[0],x=b[1],N=f.a.parse(u.search).lang,P=t.params.id;Object(r.useEffect)(function(){x(N)},[P,N]);var C=[{value:1,name:a("\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0439")},{value:0,name:a("\u041d\u0435\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439")}],K=function(e){e.isSubmitting;var t=e.setFieldValue,r=e.values;return e.isFetched,i.a.createElement(y.a,{gutter:20,type:"flex"},i.a.createElement(E.a,{className:"gutter-row",lg:16},i.a.createElement(q.f,{title:a("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f")},i.a.createElement("div",{className:"ant-row ant-form-item m-b-0"},i.a.createElement("div",{className:"ant-label"},a("\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"))),i.a.createElement(c.a,{component:q.c.AntInput,name:"title",type:"text",placeholder:a("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"),hasFeedback:!0}),i.a.createElement("div",{className:"ant-row ant-form-item m-b-0"},i.a.createElement("div",{className:"ant-label"},a("\u0412\u0435\u0431-\u0441\u0430\u0439\u0442"))),i.a.createElement(c.a,{component:q.c.AntInput,name:"web_site",type:"text",placeholder:a("goskatalog.uz"),hasFeedback:!0}),i.a.createElement(c.a,{component:q.c.AntInput,name:"email",type:"email",label:a("\u042d\u043b. \u0430\u0434\u0440\u0435\u0441"),placeholder:a("example@gmail.com"),hasFeedback:!0}),i.a.createElement(c.a,{name:"phone",type:"text",render:function(e){var t=e.field,n=e.form,r=n.errors[t.name],l=n.touched[t.name],o=Object(w.a)("ant-form-item-control",l&&r&&"has-error");return i.a.createElement("div",{className:"field-container"},i.a.createElement("div",{className:"ant-row ant-form-item"},i.a.createElement("div",{className:o},i.a.createElement("span",{className:"ant-form-item-children"},i.a.createElement("div",{className:"ant-label"},a("\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430")),i.a.createElement(V.a,{className:"phone-input",displayType:"input",format:"### ## ### ## ##",value:t.value||"",placeholder:"998 99 123 45 67",onChange:function(e){var a=e.target;n.setFieldValue(t.name,a.value)},onBlur:function(){n.setFieldTouched(t.name,!0)}})),l&&r&&i.a.createElement("div",{className:"ant-form-explain"},r))))}}),i.a.createElement(c.a,{component:q.c.CKEditor,name:"content",label:a("\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435")}),i.a.createElement(j.g,null,i.a.createElement("div",{style:{display:"flex",flexDirection:"column"},className:"ant-row ant-form-item"},i.a.createElement("div",{className:"ant-label"},a("\u041c\u0435\u0441\u0442\u043e \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f")),i.a.createElement(j.c,{style:{width:"80%",minHeight:400},defaultState:{center:[41.311151,69.279737],zoom:6,controls:[]}},i.a.createElement(j.a,null),i.a.createElement(j.h,{options:{float:"right"}}),i.a.createElement(j.b,{options:{float:"left"}}),i.a.createElement(j.e,{options:{float:"right"}}),i.a.createElement(j.f,{options:{float:"right"}}),i.a.createElement(j.d,{options:{useMapMarginInDragging:!0,draggable:!0},geometry:[r.latitude,r.longitude],modules:["geoObject.addon.balloon","geoObject.addon.hint"],properties:{hintContent:a("\u041c\u0435\u0441\u0442\u043e \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f")},onDragEnd:function(e){var a=e.get("target").geometry.getCoordinates(),r=Object(n.a)(a,2),i=r[0],l=r[1];t("latitude",i),t("longitude",l)}})))),i.a.createElement(h.a,{type:"primary",htmlType:"submit"},a("\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c")))),i.a.createElement(E.a,{className:"gutter-row",lg:8},i.a.createElement(q.f,{title:a("\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b")},i.a.createElement(c.a,{component:q.c.AsyncSelect,name:"museum_id",label:a("\u041c\u0443\u0437\u0435\u0438"),placeholder:a("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0443\u0437\u0435\u0439"),optionLabel:function(e){return d()(e,["item","title"])},optionValue:"model_item_id",loadOptionsUrl:"/items/search/result/museum",loadOptionsParams:function(e){return{extra:{_l:F,SearchForm:{s:e}}}},loadOptionsKey:"items",isSearchable:!0,isClearable:!0}),i.a.createElement(c.a,{component:q.c.AntSelect,name:"status",label:a("\u0421\u0442\u0430\u0442\u0443\u0441"),placeholder:a("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441"),selectOptions:C}))))},D=g()(N,F);return i.a.createElement(i.a.Fragment,null,i.a.createElement(q.d,{breadcrumbs:[{title:a("\u041c\u0443\u0437\u0435\u0438"),link:"/museum-pages"},{title:a("\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043c\u0443\u0437\u0435\u0439")}]}),i.a.createElement(O.a,{title:a("\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043c\u0443\u0437\u0435\u0439"),extra:[i.a.createElement(o.a,{key:"1",to:"/museum-page/create?lang=".concat(F)},i.a.createElement(S.a,{type:"file-add"}),i.a.createElement("span",null,a("\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u0443\u0437\u0435\u0439"))),i.a.createElement(o.a,{key:"2",to:"/museum-pages"},i.a.createElement(S.a,{type:"edit"}),i.a.createElement("span",null,a("\u0412\u0441\u0435 \u043c\u0443\u0437\u0435\u0438")))]}),i.a.createElement(k.a.One,{id:P,entity:"museumPage",name:"museumPage",url:"/museum-pages/".concat(P),params:{extra:{_l:N}},primaryKey:"id"},function(e){var a=e.item,t=e.isFetched;return i.a.createElement(q.g,{spinning:!t},i.a.createElement("div",{className:"page-content page-content__transparent"},i.a.createElement("div",{style:{paddingBottom:20}},i.a.createElement(v.a,{activeKey:F,onChange:function(e){var t=d()(a,"langs");if(d()(t,e))return m.push("/museum-page/".concat(t[e],"?lang=").concat(e));x(e)}},i.a.createElement(A,{key:"uz",tab:"O'zbek"}),i.a.createElement(A,{key:"ru",tab:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"}))),D?i.a.createElement(_.a,{id:P,entity:"museumPage",name:"all",url:"/museum-pages/".concat(P),params:{extra:{_l:N}},fields:[{name:"title",required:!0,value:d()(a,"title")},{name:"museum_id",required:!0,value:d()(a,"museum_id"),onSubmitValue:function(e){return d()(e,"model_item_id")}},{name:"latitude",value:d()(a,"latitude"),onSubmitValue:function(e){return e.toString()}},{name:"longitude",value:d()(a,"longitude"),onSubmitValue:function(e){return e.toString()}},{name:"phone",value:d()(a,"phone"),required:!0},{name:"web_site",value:d()(a,"web_site"),required:!1},{name:"email",required:!1,value:d()(a,"email")},{name:"content",required:!1,value:d()(a,"content")},{name:"status",value:d()(a,"status")}]},function(e){var a=e.isSubmitting,n=e.setFieldValue,r=e.values;return i.a.createElement(q.g,{spinning:a},K({isSubmitting:a,setFieldValue:n,values:r,isFetched:t}))}):i.a.createElement(_.a,{isCreate:!0,id:P,entity:"museumPage",name:"all",url:"/museum-pages",params:{extra:{_l:F,lang_hash:d()(a,"lang_hash")}},onSuccess:function(e){m.push("/museum-page/update/".concat(d()(e,"id"),"?lang=").concat(F))},fields:[{name:"title",required:!0},{name:"museum_id",required:!0,onSubmitValue:function(e){return d()(e,"model_item_id")}},{name:"latitude",value:d()(a,"latitude"),onSubmitValue:function(e){return e.toString()}},{name:"longitude",value:d()(a,"longitude"),onSubmitValue:function(e){return e.toString()}},{name:"phone",value:d()(a,"phone"),required:!0},{name:"web_site",value:d()(a,"web_site"),required:!1},{name:"email",required:!1,value:d()(a,"email")},{name:"content",required:!1},{name:"status",value:d()(a,"status")}]},function(e){var a=e.isSubmitting,n=e.setFieldValue,r=e.values;return i.a.createElement(q.g,{spinning:a},K({isSubmitting:a,setFieldValue:n,values:r,isFetched:t}))})))}))})},981:function(e,a,t){"use strict";var n=t(25),r=t(4),i=t(0),l=t.n(i),o=t(73),u=t(63),m=t(90),c=t(976),s=t(985),d=t(14),p=t.n(d),f=t(108),b=t.n(f),g=t(974),v=t(52),y=function(e){var a=e.children,t=e.handleSubmit,n=e.values,r=e.isSubmitting,i=e.setFieldValue,o=e.isValid,u=e.errors;return l.a.createElement("form",{onSubmit:t,autoComplete:"off"},a({handleSubmit:t,values:n,setFieldValue:i,isSubmitting:r,isValid:o,errors:u}))},E=Object(c.c)({enableReinitialize:!0,validationSchema:function(e){var a=e.fields,t=e.t;if(!b()(a))return s.object().shape({});var n={};return a.forEach(function(e){var a;switch(e.type){case"email":a=s.string().email(t("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 email"));break;case"string":a=s.string().typeError(t("\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0430"));break;case"object":a=s.object();break;case"number":a=s.number().typeError(t("\u0414\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0447\u0438\u0441\u043b\u043e\u043c"));break;case"array":a=s.array();break;case"boolean":a=s.boolean();break;case"date":a=s.date();break;default:a=s.string()}e.required&&(a=a.required(t("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"))),e.min&&(a=a.min(e.min,t("\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043a\u043e\u0440\u043e\u0442\u043a\u043e!"))),e.max&&(a=a.max(e.max,t("\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043e\u043b\u0433\u043e!"))),a=a.nullable(),n[e.name]=a}),s.object().shape(n)},mapPropsToValues:function(e){var a=e.fields;return b()(a)?a.reduce(function(e,a){return Object(r.a)(Object(r.a)({},e),{},Object(n.a)({},a.name,p()(a,"value","")))},{}):{}},handleSubmit:function(e,a){var t=a.props,n=a.setFieldError,i=a.setSubmitting,l=a.resetForm,o=t.fields,u=t.entity,m=t.name,c=t.id,s=t.url,d=t.params,p=t.isCreate,f=t.isDelete,b=t.loadEntity,v=t.primaryKey,y=t.CreateAction,E=t.appendIds,h=void 0!==E&&E,O=t.prependIds,S=void 0!==O&&O,j=t.DeleteAction,w=t.UpdateAction,F=t.valuesAsFormData,V=void 0===F||F,k=t.onSuccess,_=void 0===k?function(){}:k,q=t.onError,A=void 0===q?function(){}:q;e=Object(r.a)({},e),"function"===typeof s&&(s=s(Object(r.a)({},e))),o.forEach(function(a){a.hasOwnProperty("onSubmitValue")&&"function"===typeof a.onSubmitValue&&(a.hasOwnProperty("onSubmitKey")?(e[a.onSubmitKey]=a.onSubmitValue(e[a.name],e),delete e[a.name]):e[a.name]=a.onSubmitValue(e[a.name],e)),a.hasOwnProperty("optionTitle")&&a.hasOwnProperty("optionTitleKey")&&(e[a.optionTitle]=e[a.name][a.optionTitleKey]),a.hasOwnProperty("optionKey")&&a.hasOwnProperty("optionValue")&&(e[a.optionKey]=e[a.name][a.optionValue],delete e[a.name]),a.hasOwnProperty("disabled")&&delete e[a.name]});var x=e;V&&(x=new FormData,Object.keys(e).forEach(function(a){e[a]instanceof Array?e[a].forEach(function(e){x.append("".concat(a,"[]"),e)}):x.append(a,e[a])})),f?j({id:c,entity:u,name:m,url:s,params:d,values:x,cb:{success:function(){g.a.success({message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d",duration:2}),_({},{resetForm:l})},error:function(e){g.a.error({message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",duration:2}),e instanceof Array?e.map(function(e){var a=e.field,t=e.message;n(a,t)}):e instanceof Object&&Object.keys(e).map(function(a){var t=e[a][0];n(a,t)}),A(e)},finally:function(){i(!1)}}}):p?y({entity:u,name:m,url:s,params:d,values:e,appendIds:h,prependIds:S,loadEntity:b,primaryKey:v,cb:{success:function(e){g.a.success({message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d",duration:2}),_(e,{resetForm:l})},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];g.a.error({message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",duration:2}),e instanceof Array?e.map(function(e){var a=e.field,t=e.message;n(a,t)}):e instanceof Object&&Object.keys(e).map(function(a){var t=e[a][0];n(a,t)}),A()},finally:function(){i(!1)}}}):w({entity:u,name:m,url:s,id:c,params:d,values:e,loadEntity:b,primaryKey:v,cb:{success:function(e){g.a.success({message:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u043e",duration:2}),_(e,{resetForm:l})},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];g.a.error({message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",duration:2}),e instanceof Array?e.map(function(e){var a=e.field,t=e.message;n(a,t)}):e instanceof Object&&Object.keys(e).map(function(a){var t=e[a][0];n(a,t)}),A()},finally:function(){i(!1)}}})}})(y);y.defaultProps={loadEntity:!0};a.a=Object(o.b)(null,function(e){return Object(u.bindActionCreators)({CreateAction:v.default.Create.request,UpdateAction:v.default.Update.request,DeleteAction:v.default.Delete.request},e)})(Object(m.c)("main")(E))}}]);